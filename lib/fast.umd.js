!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Fast={})}(this,function(e){"use strict";const t={historyLimit:20,timeout:3e4,debug:!1,strictStatusCheck:!1,formSerializationFormat:"json"};class n{constructor(e){this.config={...t};const n=this.loadFromScript();Object.assign(this.config,n,e)}get(){return{...this.config}}update(e){Object.assign(this.config,e)}loadFromScript(){const e=document.querySelectorAll("script[data-z-config]");if(0===e.length)return{};const t=e[e.length-1].getAttribute("data-z-config");if(!t)return{};try{return JSON.parse(t)}catch(e){return{}}}}class r{constructor(){this.directives=new Map,this.cachedDirectives=null}register(e){this.directives.has(e.name),this.directives.set(e.name,e),this.cachedDirectives=null}get(e){return this.directives.get(e)}getAll(){return this.cachedDirectives||(this.cachedDirectives=Array.from(this.directives.values()).sort((e,t)=>t.priority-e.priority)),this.cachedDirectives.slice()}has(e){return this.directives.has(e)}}class s{constructor(){this.commands=new Map}register(e,t){this.commands.has(e),this.commands.set(e,t)}registerMultiple(e){Object.entries(e).forEach(([e,t])=>{this.register(e,t)})}get(e){return this.commands.get(e)}has(e){return this.commands.has(e)}getAll(){const e={};return this.commands.forEach((t,n)=>{e[n]=t}),e}}class i extends Error{constructor(e,t){super(e),this.name="FastError",this.context=t}}class o extends i{constructor(e,t,n,r,s){super(`[${n} ${t}] ${e}`,s),this.name="RequestError",this.url=t,this.method=n,this.status=r}}class a{constructor(e,t=!1){this.onError=e,this.debug=t}handle(e,t){if(this.debug,this.onError)try{this.onError(e,t)}catch(e){}}wrap(e){return(...t)=>{try{return e(...t)}catch(e){throw this.handle(e,{args:t}),e}}}wrapAsync(e){return async(...t)=>{try{return await e(...t)}catch(e){throw this.handle(e,{args:t}),e}}}}const c=new WeakMap;let l=0;function u(e){return c.has(e)||c.set(e,{}),c.get(e)}function h(e){c.delete(e)}function f(e,t=document){return t.querySelector(e)}function d(e,t,n,r={}){var s,i;const o=new CustomEvent(t,{detail:n,bubbles:null===(s=r.bubbles)||void 0===s||s,cancelable:null===(i=r.cancelable)||void 0===i||i});return e.dispatchEvent(o)}function p(e,t,n,r){e.addEventListener(t,n,r);const s=u(e);s.listeners||(s.listeners=[]),s.listeners.push({event:t,handler:n})}function m(e,t){return"submit"===t||"click"===t&&e instanceof HTMLAnchorElement}class g{constructor(e){this.initialized=!1,this.configManager=new n(e),this.directiveRegistry=new r,this.commandRegistry=new s;const t=this.configManager.get();this.errorHandler=new a(t.onError,t.debug)}init(){this.initialized?this.configManager.get().debug:(this.initialized=!0,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.onReady()):this.onReady())}onReady(){const e=this.configManager.get();e.debug,this.activate(document.body),e.debug,d(document.body,"z-ready")}activate(e){try{const t=this.directiveRegistry.getAll();if(this.configManager.get().debug,0===t.length)return;this.activateDirectivesOnElement(e,t),e.querySelectorAll("*").forEach(e=>{this.activateDirectivesOnElement(e,t)})}catch(t){this.errorHandler.handle(t,{element:e})}}activateDirectivesOnElement(e,t){const n=u(e);n.activeDirectives||(n.activeDirectives=new Set);for(const r of t)try{if(n.activeDirectives.has(r.name))continue;if(n.ignored&&"z-ignore"!==r.name)continue;r.activate(e,this)}catch(t){this.errorHandler.handle(t,{directive:r.name,element:e})}}deactivate(e){try{const t=u(e);if(t.activeDirectives)for(const n of t.activeDirectives){const t=this.directiveRegistry.get(n);if(null==t?void 0:t.deactivate)try{t.deactivate(e)}catch(t){this.errorHandler.handle(t,{directive:n,element:e})}}t.listeners&&t.listeners.forEach(({event:t,handler:n})=>{e.removeEventListener(t,n)}),h(e),e.querySelectorAll("*").forEach(e=>this.deactivate(e))}catch(t){this.errorHandler.handle(t,{element:e})}}register(e){this.directiveRegistry.register(e)}registerCommands(e){this.commandRegistry.registerMultiple(e)}getConfig(){return this.configManager.get()}getDirectiveRegistry(){return this.directiveRegistry}getCommandRegistry(){return this.commandRegistry}getErrorHandler(){return this.errorHandler}}class v{markActivated(e){const t=u(e);t.activeDirectives||(t.activeDirectives=new Set),t.activeDirectives.add(this.name)}createContext(e,t){return{element:e,engine:t,config:t.getConfig()}}shouldActivate(e,t){var n;return!!e.hasAttribute(t)&&!(null===(n=u(e).activeDirectives)||void 0===n?void 0:n.has(this.name))}}function y(e,t,n){if(void 0===n)return e.getAttribute(t);null!==n&&!1!==n?!0!==n?e.setAttribute(t,String(n)):e.setAttribute(t,""):e.removeAttribute(t)}function b(e,t){const n=[];let r=e;for(;r&&r!==document.documentElement;){const e=y(r,t);null!==e&&n.push(e),r=r.parentElement}return n}function w(e,t){const{url:n,method:r="GET",data:s,headers:i={},timeout:a=3e4,json:c=!1,strictStatusCheck:l=!1}=e,u=null!=t?t:new XMLHttpRequest,h=new Promise((e,t)=>{u.open(r,n,!0),Object.entries(i).forEach(([e,t])=>{u.setRequestHeader(e,t)}),!c||!s||s instanceof FormData||u.setRequestHeader("Content-Type","application/json"),u.timeout=a,u.onload=()=>{const s=function(e){const t={};return e?(e.trim().split(/[\r\n]+/).forEach(e=>{const n=e.split(": "),r=n.shift(),s=n.join(": ");r&&(t[r.toLowerCase()]=s)}),t):t}(u.getAllResponseHeaders()),i={status:u.status,statusText:u.statusText,headers:s,body:u.responseText,xhr:u},a=u.status>=200&&u.status<300;if(!l||a){if((s["content-type"]||"").includes("text/html")){const e=new DOMParser;i.body=e.parseFromString(u.responseText,"text/html")}e(i)}else t(new o(`Request failed with status ${u.status}`,n,r,u.status))},u.onerror=()=>{t(new o("Network error",n,r))},u.ontimeout=()=>{t(new o("Request timeout",n,r))};let h=null;if(s)if(s instanceof FormData)h=s;else if(s instanceof URLSearchParams)h=s.toString(),i["Content-Type"]||u.setRequestHeader("Content-Type","application/x-www-form-urlencoded");else if(c)h=JSON.stringify(s);else{const e=new URLSearchParams;Object.entries(s).forEach(([t,n])=>{null!=n&&e.append(t,String(n))}),h=e.toString(),i["Content-Type"]||u.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}u.send(h)});return{promise:h,xhr:u}}class E{static enqueue(e){this.queue.add(e),this.pending||(this.pending=!0,queueMicrotask(()=>this.flush()))}static flush(){if(0===this.queue.size)return void(this.pending=!1);const e=Array.from(this.queue);this.queue.clear(),this.pending=!1,e.sort((e,t)=>t.priority-e.priority);for(const t of e)t.run()}static flushSync(){if(0===this.queue.size)return;const e=Array.from(this.queue);this.queue.clear(),this.pending=!1,e.sort((e,t)=>t.priority-e.priority);for(const t of e)t.run()}}E.queue=new Set,E.pending=!1;class x{constructor(){this.subscribers=new Set,this.syncSubscribers=new Set}subscribe(e){this.subscribers.add(e)}unsubscribe(e){this.subscribers.delete(e)}subscribeSync(e){this.syncSubscribers.add(e)}unsubscribeSync(e){this.syncSubscribers.delete(e)}notify(){for(const e of this.syncSubscribers)e.markDirty();for(const e of this.subscribers)E.enqueue(e)}}let S=null;function A(){return S}function C(e){const t=S;return S=e,t}class k extends x{constructor(e){super(),this.dependencies=new Set,this.dirty=!0,this.isUpdating=!1,this.compute=e,this.update()}addDependency(e){this.dependencies.add(e)}updateSubscriptions(e){for(const t of this.dependencies)e.has(t)||(t.unsubscribeSync(this),this.dependencies.delete(t));for(const t of e)this.dependencies.has(t)||(t.subscribeSync(this),this.dependencies.add(t))}markDirty(){this.dirty||this.isUpdating||(this.dirty=!0,this.notify())}update(){if(!this.isUpdating){this.isUpdating=!0;try{const e=new Set,t=C({addDependency:t=>{e.add(t)}});try{const e=this.compute();this.cachedValue=e}finally{C(t)}this.updateSubscriptions(e),this.dirty=!1,this.notify()}catch(e){}finally{this.isUpdating=!1}}}get value(){this.dirty&&this.update();const e=A();return e&&e.addDependency(this),this.cachedValue}peek(){return this.dirty&&this.update(),this.cachedValue}}function L(e){return new k(e)}const D=Symbol("iterate"),T=new class{constructor(){this.root={},this.signalMap=new WeakMap,this.proxyCache=new WeakMap,this.reverseProxyCache=new WeakMap,this.computedSignals=new Map,this.proxy=this.createReactive(this.root)}getSignal(e,t){let n=this.signalMap.get(e);n||(n=new Map,this.signalMap.set(e,n));let r=n.get(t);return r||(r=new x,n.set(t,r)),r}shouldProxy(e){if(null===e||"object"!=typeof e)return!1;if(e instanceof Node)return!1;if(e instanceof Event)return!1;if(e instanceof Date)return!1;if(e instanceof RegExp)return!1;if(e instanceof Map)return!1;if(e instanceof Set)return!1;if(e instanceof WeakMap)return!1;if(e instanceof WeakSet)return!1;if(ArrayBuffer.isView(e))return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||t===Array.prototype||null===t}createReactive(e){if(this.reverseProxyCache.has(e))return e;const t=this.proxyCache.get(e);if(t)return t;const n=new Proxy(e,{get:(e,t)=>{if(e===this.root&&"string"==typeof t){const e=this.computedSignals.get(t);if(e){const t=A();return t&&t.addDependency(e),e.value}}const n=A();n&&n.addDependency(this.getSignal(e,t));const r=Reflect.get(e,t);if(this.shouldProxy(r)){const e=this.createReactive(r),t=A();if(t){let e=r;for(;this.reverseProxyCache.has(e);)e=this.reverseProxyCache.get(e);Array.isArray(e)&&t.addDependency(this.getSignal(e,D))}return e}return r},set:(e,t,n)=>{const r=Reflect.get(e,t);if(!Object.is(r,n)&&(this.shouldProxy(n)&&(n=this.createReactive(n)),Reflect.set(e,t,n),this.getSignal(e,t).notify(),Array.isArray(e))){let t=e;for(;this.reverseProxyCache.has(t);)t=this.reverseProxyCache.get(t);this.getSignal(t,D).notify()}return!0},deleteProperty:(e,t)=>{const n=Reflect.has(e,t),r=Reflect.deleteProperty(e,t);if(r&&n&&(this.getSignal(e,t).notify(),Array.isArray(e))){let t=e;for(;this.reverseProxyCache.has(t);)t=this.reverseProxyCache.get(t);this.getSignal(t,D).notify()}return r}});return this.proxyCache.set(e,n),this.reverseProxyCache.set(n,e),n}resolvePath(e,t){const n=t.split(".");let r=e;for(const e of n){if(null==r)return;if("object"!=typeof r)return;r=r[e]}return r}get(e){if(!e.includes(".")){const t=this.computedSignals.get(e);return t?t.value:this.proxy[e]}return this.resolvePath(this.proxy,e)}set(e,t){if(!e.includes("."))return void(this.proxy[e]=t);const n=e.split(".");let r=this.proxy;for(let e=0;e<n.length-1;e++){const t=n[e];if("object"!=typeof r||null===r)return;const s=r;t in s&&"object"==typeof s[t]&&null!==s[t]||(s[t]={}),r=s[t]}"object"==typeof r&&null!==r&&(r[n[n.length-1]]=t)}patch(e){this.deepMerge(this.proxy,e)}deepMerge(e,t){for(const[n,r]of Object.entries(t))null===r?delete e[n]:"object"!=typeof r||Array.isArray(r)?e[n]=r:(("object"!=typeof e[n]||null===e[n]||Array.isArray(e[n]))&&(e[n]={}),this.deepMerge(e[n],r))}has(e){if(!e.includes("."))return e in this.proxy;const t=e.split(".");let n=this.proxy;for(const e of t){if("object"!=typeof n||null===n)return!1;if(!(e in n))return!1;n=n[e]}return!0}delete(e){if(!e.includes("."))return void delete this.proxy[e];const t=e.split(".");let n=this.proxy;for(let e=0;e<t.length-1;e++){if("object"!=typeof n||null===n)return;n=n[t[e]]}"object"==typeof n&&null!==n&&delete n[t[t.length-1]]}getAll(){return JSON.parse(JSON.stringify(this.root))}createComputed(e,t){const n=this.computedSignals.get(e);if(n)return n;const r=L(t);return this.computedSignals.set(e,r),r}};class M{constructor(e,t={}){this.expression=e,this.context=t}evaluate(){return this.execute("expression")}evaluateAsStatement(){return this.execute("statement")}getContextSnapshot(){const e=Object.keys(this.context),t=e.map(e=>this.context[e]);return{keys:e,values:t}}static getTransformedExpression(e){const t=this.getFromCache(this.transformedCache,e);if(void 0!==t)return t;const n=this.transformExpression(e);return this.setCache(this.transformedCache,e,n),n}static transformExpression(e){return e.replace(/\$([a-zA-Z_]\w*)/g,"__$z.$1")}execute(e){var t;let n=null;try{const r=null===(t=this.expression)||void 0===t?void 0:t.trim();if(!r)return;n=M.getTransformedExpression(r);const{keys:s,values:i}=this.getContextSnapshot();return M.getCompiledFunction(s,n,e)(...i)}catch(e){return}}static getCompiledFunction(e,t,n){const r=this.createFunctionCacheKey(e,t,n),s=this.getFromCache(this.compiledFunctionCache,r);if(s)return s;let i;i="expression"===n?`return (${t})`:t.includes(";")?t:`return (${t})`;const o=new Function(...e,i);return this.setCache(this.compiledFunctionCache,r,o),o}static createFunctionCacheKey(e,t,n){return`${n}|${e.join("")}|${t}`}static getFromCache(e,t){const n=e.get(t);if(void 0!==n)return e.delete(t),e.set(t,n),n}static setCache(e,t,n){if(e.has(t))e.delete(t);else if(e.size>=this.CACHE_LIMIT){const t=e.keys().next().value;void 0!==t&&e.delete(t)}e.set(t,n)}static createContext(e={}){return{__$z:T.proxy,...e}}static getLoopContext(e){const t={};let n=e,r=0;for(;n&&r<20;){const e=n[Symbol.for("twinsparkLoopContext")];e&&Object.assign(t,e),n=n.parentElement,r++}return t}}function z(e,t={}){const n=M.createContext(t);return new M(e,n).evaluate()}function R(e,t={}){const n=M.createContext(t);return new M(e,n).evaluateAsStatement()}function O(e,t,...n){"undefined"!=typeof console&&console.error}function N(e){if((e=e.trim()).startsWith("{")||e.startsWith("["))try{return JSON.parse(e)}catch(e){throw new Error(`Failed to parse JSON data: ${e}`)}return new URLSearchParams(e)}function j(e,t){t instanceof FormData?t.forEach((t,n)=>{e instanceof FormData?e.append(n,t):e.append(n,t.toString())}):t instanceof URLSearchParams?t.forEach((t,n)=>{FormData,e.append(n,t)}):Object.entries(t).forEach(([t,n])=>{if(null!=n){const r=String(n);FormData,e.append(t,r)}})}M.transformedCache=new Map,M.compiledFunctionCache=new Map,M.CACHE_LIMIT=512;class F{collect(e,t){var n;const r=this.findForm(e);let s=null;if(r){const e=this.getSubmitter(t);let i=null,o=!1;if(e)try{i=new FormData(r,e),o=!0}catch(e){i=new FormData(r)}else i=new FormData(r);if(i||(i=new FormData(r)),!o&&e&&this.shouldAppendSubmitter(e)){const t=e.getAttribute("name");if(t){const r=null!==(n=e.getAttribute("value"))&&void 0!==n?n:"";i.append(t,r)}}s=i}const i=b(e,"z-data");return i.length>0&&(s||(s=new URLSearchParams),i.reverse().forEach(e=>{try{const t=N(e);j(s,t)}catch(e){}})),s}findForm(e){if(e instanceof HTMLFormElement)return e;if(e instanceof HTMLInputElement&&e.form)return e.form;const t=e.closest("form");return t instanceof HTMLFormElement?t:null}getSubmitter(e){if(!e)return null;if("undefined"!=typeof SubmitEvent&&e instanceof SubmitEvent&&e.submitter)return e.submitter instanceof HTMLElement?e.submitter:null;if(e.currentTarget instanceof HTMLElement&&this.isSubmitCandidate(e.currentTarget))return e.currentTarget;if(e.target instanceof HTMLElement){const t=e.target.closest('button, input[type="submit"], input[type="image"]');return t instanceof HTMLElement?t:null}return null}isSubmitCandidate(e){return e instanceof HTMLButtonElement?"submit"===e.type:e instanceof HTMLInputElement&&("submit"===e.type||"image"===e.type)}shouldAppendSubmitter(e){return!!e.hasAttribute("name")&&this.isSubmitCandidate(e)}}class P{constructor(){this.debouncers=new WeakMap,this.throttlers=new WeakMap}static parseDelayModifiers(e){const t={};for(let n=0;n<e.length;n++){const r=e[n];if(r.startsWith("delay")){const r=this.extractDelayValue(e,n);r>0&&(t.delay=r)}else if(r.startsWith("debounce")){const r=this.extractDelayValue(e,n);r>0&&(t.debounce={delay:r,leading:e.includes("leading"),trailing:!e.includes("notrail")})}else if(r.startsWith("throttle")){const r=this.extractDelayValue(e,n);r>0&&(t.throttle={delay:r,leading:!e.includes("noleading"),trailing:e.includes("trail")})}}return t}static extractDelayValue(e,t){const n=e[t].match(/^(?:delay|debounce|throttle)\.(\d+)$/);if(n)return parseInt(n[1],10);if(t<e.length-1){const n=parseInt(e[t+1],10);return isNaN(n)?0:n}return 0}async executeWithDelay(e,t){if(t.debounce){const n=this.debounceCall(e.element,e.statement,t.debounce);return n.wait?{executeNow:!1,wait:(async()=>{const t=await n.wait;return t&&await e.execute(),t||!1})()}:n}if(t.throttle){const n=this.throttleCall(e.element,e.statement,t.throttle);return n.wait?{executeNow:!1,wait:(async()=>{const t=await n.wait;return t&&await e.execute(),t||!1})()}:n}return t.delay&&t.delay>0?{executeNow:!1,wait:(async()=>(await new Promise(e=>setTimeout(e,t.delay)),await e.execute(),!0))()}:{executeNow:!0}}debounceCall(e,t,n){const{delay:r,leading:s=!1,trailing:i=!0}=n;this.debouncers.has(e)||this.debouncers.set(e,new Map);const o=this.debouncers.get(e);o.has(t)||o.set(t,{timeoutId:0,leadingFired:!1});const a=o.get(t);return a.timeoutId&&clearTimeout(a.timeoutId),s&&!a.leadingFired?(a.leadingFired=!0,a.timeoutId=setTimeout(()=>{a.leadingFired=!1},r),{executeNow:!0}):i?{executeNow:!1,wait:new Promise(e=>{a.timeoutId=setTimeout(()=>{a.leadingFired=!1,e(!0)},r)})}:{executeNow:!1}}throttleCall(e,t,n){const{delay:r,leading:s=!0,trailing:i=!1}=n;this.throttlers.has(e)||this.throttlers.set(e,new Map);const o=this.throttlers.get(e);o.has(t)||o.set(t,{lastExecuted:0,timeoutId:0});const a=o.get(t),c=Date.now(),l=c-a.lastExecuted;if(l>=r)return s?(a.lastExecuted=c,{executeNow:!0}):(a.timeoutId&&clearTimeout(a.timeoutId),{executeNow:!1,wait:new Promise(e=>{a.timeoutId=setTimeout(()=>{a.lastExecuted=Date.now(),a.timeoutId=0,e(!0)},r)})});if(i){a.timeoutId&&clearTimeout(a.timeoutId);const e=r-l;return{executeNow:!1,wait:new Promise(t=>{a.timeoutId=setTimeout(()=>{a.lastExecuted=Date.now(),a.timeoutId=0,t(!0)},e)})}}return{executeNow:!1}}cleanup(e){const t=this.debouncers.get(e);if(t){for(const e of t.values())e.timeoutId&&clearTimeout(e.timeoutId);this.debouncers.delete(e)}const n=this.throttlers.get(e);if(n){for(const e of n.values())e.timeoutId&&clearTimeout(e.timeoutId);this.throttlers.delete(e)}}}const H=new P;var I;const q="delay.",W=/^every\(\s*(\d+)\s*\)$/;function _(e){const t=e.match(W);if(!t)return null;const n=Number.parseInt(t[1],10);return Number.isNaN(n)||n<=0?null:n}function $(e){return e instanceof HTMLFormElement?"submit":e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement?"change":"click"}function V(e){var t;if(e instanceof Element)return e instanceof HTMLInputElement?"checkbox"===e.type||"radio"===e.type?e.checked:e.value:e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement?e.value:null!==(t=e.textContent)&&void 0!==t?t:void 0}function U(e,t){return(n,r,s)=>{const i=e();new IntersectionObserver(e=>{const n=e[0];n&&t(n)&&s()},i).observe(n)}}function B(e,t,n){return(r,s,i)=>{const o=e(r);if(!o)return;const a=new MutationObserver(e=>{n(r,i,e,a)});a.observe(o,t)}}const J={load:(e,t,n)=>function(e,t){let n=!1;const r=()=>{n||(n=!0,t())};"complete"!==document.readyState?window.addEventListener("load",()=>r(),{once:!0}):Promise.resolve().then(()=>r())}(0,n)},K={scroll:(e,t)=>{window.addEventListener("scroll",()=>t())},windowScroll:(e,t)=>{e.addEventListener("scroll",()=>t())},outside:(e,t)=>{document.addEventListener("click",n=>{e.contains(n.target)||t()})}};for(const[e,t]of Object.entries(K))J[e]=(e,n,r)=>t(e,r);const G={visible:{options:()=>({threshold:.01}),predicate:e=>e.intersectionRatio>=.01},invisible:{predicate:e=>0===e.intersectionRatio},closeby:{options:()=>({rootMargin:window.innerHeight/2+"px"}),predicate:e=>e.intersectionRatio>=.01},away:{options:()=>({rootMargin:window.innerHeight/2+"px"}),predicate:e=>0===e.intersectionRatio}};for(const[e,t]of Object.entries(G)){const n=null!==(I=t.options)&&void 0!==I?I:()=>{};J[e]=U(n,t.predicate)}const Z={remove:{target:e=>e.parentNode,options:{childList:!0},callback:(e,t,n,r)=>{for(const s of n)for(const n of Array.from(s.removedNodes))if(n===e||n instanceof Element&&n.contains(e))return t(),void r.disconnect()}},childrenChange:{target:e=>e,options:{childList:!0},callback:(e,t)=>{t()}},empty:{target:e=>e,options:{childList:!0},callback:(e,t)=>{0===e.children.length&&t()}},notempty:{target:e=>e,options:{childList:!0},callback:(e,t)=>{e.children.length>0&&t()}}};for(const[e,t]of Object.entries(Z))J[e]=B(t.target,t.options,t.callback);const X=new WeakMap;function Q(e){var t;const n=e.getAttribute("z-config"),r=null!==(t=null==n?void 0:n.trim())&&void 0!==t?t:null,s=X.get(e);if(!r)return s&&!s.raw||X.set(e,{raw:null,parsed:null}),null;if(s&&s.raw===r)return s.parsed;try{const t=JSON.parse(r),n="object"!=typeof t||null===t||Array.isArray(t)?null:t;return X.set(e,{raw:r,parsed:n}),n}catch(t){return X.set(e,{raw:r,parsed:null}),null}}function Y(e){const t=Q(e);if(!t)return null;const n=t.selector;if("string"!=typeof n)return null;const r=n.trim();return r.length>0?r:null}function ee(e){const t=Q(e);if(!t)return null;const n=t.format;return"json"===n||"formdata"===n||"urlencoded"===n?n:null}function te(e){const t=Q(e);if(!t)return null;const n=t.method;if("string"!=typeof n)return null;const r=n.trim().toUpperCase();return r.length>0?r:null}function ne(e,t){const n=Q(e),r=function(e){if("number"==typeof e)return Number.isFinite(e)&&e>0?Math.floor(e):null;if("string"==typeof e){const t=e.trim();if(""===t)return null;const n=Number.parseInt(t,10);return Number.isNaN(n)||n<=0?null:n}return null}(null==n?void 0:n.interval);return null!==r?r:function(e){const t=e.getAttribute("z-trigger");if(!t)return null;const n=t.split(",").map(e=>e.trim()).filter(e=>e.length>0);for(const e of n){const t=e.split(/\s+/).filter(e=>e.length>0);for(const e of t){const t=_(e);if(null!==t)return t}}return null}(e)}function re(){const e=new F;return{prepare(t){const{element:n,method:r}=t;if(["POST","PUT","PATCH"].includes(r))if(n.hasAttribute("z-data")){const e=n.getAttribute("z-data");if(e&&""!==e.trim())try{t.data=z(e)}catch(e){O(),t.data=void 0}else t.data=T.getAll();se(t.requestOptions.headers,"content-type")||(t.requestOptions.headers["Content-Type"]="application/json"),t.requestOptions.json=!0}else if(n instanceof HTMLFormElement){const r=t.engine.getConfig(),s=ee(n)||r.formSerializationFormat||"json",i=e.collect(n,t.event);if(i)if("json"===s){if(i instanceof FormData||i instanceof URLSearchParams){const e={};i.forEach((t,n)=>{e[n]=t}),t.data=e}else t.data=i;se(t.requestOptions.headers,"content-type")||(t.requestOptions.headers["Content-Type"]="application/json"),t.requestOptions.json=!0}else"formdata"===s?t.data=i:(t.data=i,se(t.requestOptions.headers,"content-type")||(t.requestOptions.headers["Content-Type"]="application/x-www-form-urlencoded"))}}}}function se(e,t){const n=t.toLowerCase();return Object.keys(e).some(e=>e.toLowerCase()===n)}function ie(e){return e.replace(/-([a-z])/g,(e,t)=>t.toUpperCase())}function oe(e){return e.replace(/-/g,"_")}function ae(e){const t=ie(e);return t.charAt(0).toUpperCase()+t.slice(1)}function ce(){return{prepare(e){const t=function(e){const t=[],n=y(e,"z-json");if(null!==n){const e=n.split(",").map(e=>e.trim()).filter(e=>e.length>0);if(0===e.length)t.push({signal:"json"});else for(const n of e){const[e,r]=n.split(":").map(e=>e.trim());e&&t.push({signal:e,path:r||void 0})}}for(const n of Array.from(e.attributes)){if(!n.name.startsWith("z-json-"))continue;const e=n.name.slice(7);if(!e)continue;const r=ie(e),s=n.value.trim();t.push({signal:r,path:s||void 0})}return t}(e.element);e.metadata.jsonBindings=t,t.length>0&&(e.expectJson=!0,e.requestOptions.json=!0,function(e){const t="accept".toLowerCase();return Object.keys(e).some(e=>e.toLowerCase()===t)}(e.requestOptions.headers)||(e.requestOptions.headers.Accept="application/json"))},success(e){var t;const n=null!==(t=e.metadata.jsonBindings)&&void 0!==t?t:[];if(0===n.length)return;const r=function(e){if("string"!=typeof e)throw new Error("Expected JSON response text but received a Document.");if(""===e.trim())return null;try{return JSON.parse(e)}catch(e){throw new Error(`Failed to parse JSON response: ${e.message}`)}}(e.response.body);e.response.json=r,function(e,t){for(const n of e){const e=le(t,n.path);T.set(n.signal,e)}}(n,r)}}}function le(e,t){if(!t)return e;const n=t.split(".").map(e=>e.trim()).filter(Boolean);let r=e;for(const e of n){if(null==r)return;if(Array.isArray(r)){const t=Number(e);if(Number.isNaN(t))return;r=r[t];continue}if("object"!=typeof r)return;r=r[e]}return r}class ue{findTarget(e,t){var n;const r=null===(n=null!=t?t:y(e,"z-target"))||void 0===n?void 0:n.trim();if(!r||"this"===r||"target"===r)return e;if(!r.includes("|"))return this.findSingleTarget(e,r,!1);const s=r.split("|").map(e=>e.trim()).filter(Boolean);if(!s.length)return e;let i=e;for(let e=0;e<s.length;e++){if(!i)return null;i=this.findSingleTarget(i,s[e],e>0)}return i}findSingleTarget(e,t,n){var r;const s=t.trim();if(!s||"this"===s||"target"===s)return e;if("inherit"===s){const t=null===(r=e.parentElement)||void 0===r?void 0:r.closest("[z-target]");return t?this.findTarget(t):null}if("parent"===s)return e.parentElement;if(s.startsWith("parent ")){const t=e.parentElement;if(!t)return null;const n=s.substring(7).trim();return n?t.closest(n)||f(n,t):t}if(s.startsWith("child ")){const t=s.substring(6).trim();return t?f(t,e):null}if(s.startsWith("sibling ")){const t=e.parentElement;if(!t)return null;const n=s.substring(8).trim();return n?f(n,t):null}return f(s,n?e:document)}findReply(e,t){if("string"==typeof e){const t=document.createElement("template");return t.innerHTML=e.trim(),t.content}if(!t){const t=document.createDocumentFragment();return Array.from(e.body.childNodes).forEach(e=>{t.appendChild(e.cloneNode(!0))}),t}return f(t,e)}}function he(e,t,n){var r,s,i,o;const a=function(e){if("string"==typeof e){const t=document.createElement("template");return t.innerHTML=e.trim(),t.content}return e}(t),c=(l=a)instanceof Element?[l]:l instanceof DocumentFragment?Array.from(l.childNodes).filter(e=>e instanceof Element):[];var l;switch(n){case"replace":return a instanceof DocumentFragment&&a.firstChild?null===(r=e.parentNode)||void 0===r||r.replaceChild(a,e):a instanceof Element&&(null===(s=e.parentNode)||void 0===s||s.replaceChild(a,e)),c;case"inner":{const t=e;return"function"==typeof t.replaceChildren?t.replaceChildren(a):(e.innerHTML="",e.appendChild(a)),[e]}case"prepend":return e.insertBefore(a,e.firstChild),[e];case"append":return e.appendChild(a),[e];case"beforebegin":return null===(i=e.parentNode)||void 0===i||i.insertBefore(a,e),c;case"afterend":return null===(o=e.parentNode)||void 0===o||o.insertBefore(a,e.nextSibling),c;case"morph":case"morph-all":return fe(e,a),[e];default:return[]}}function fe(e,t){var n;t instanceof Element?e.tagName===t.tagName?(function(e,t){for(let n=e.attributes.length-1;n>=0;n--){const r=e.attributes[n];t.hasAttribute(r.name)||e.removeAttribute(r.name)}for(let n=0;n<t.attributes.length;n++){const r=t.attributes[n];e.getAttribute(r.name)!==r.value&&e.setAttribute(r.name,r.value)}}(e,t),e.innerHTML=t.innerHTML):null===(n=e.parentNode)||void 0===n||n.replaceChild(t,e):t instanceof DocumentFragment&&t.firstElementChild&&fe(e,t.firstElementChild)}class de{process(e){this.findScripts(e).forEach(e=>{this.shouldExecute(e)&&this.executeScript(e)})}findScripts(e){if(e instanceof DocumentFragment){const t=[];return e.querySelectorAll("script").forEach(e=>{e instanceof HTMLScriptElement&&t.push(e)}),t}return Array.from(e.querySelectorAll("script"))}shouldExecute(e){if(e.hasAttribute("data-z-noload"))return!1;const t=e.type;return!t||"text/javascript"===t||"module"===t}executeScript(e){var t;const n=document.createElement("script");Array.from(e.attributes).forEach(e=>{n.setAttribute(e.name,e.value)}),e.src?n.src=e.src:n.textContent=e.textContent,null===(t=e.parentNode)||void 0===t||t.replaceChild(n,e)}}class pe{constructor(e){this.engine=e,this.targetFinder=new ue,this.scriptProcessor=new de}async swap(e,t,n){const r=n||this.getSwapStrategy(e),s=this.targetFinder.findTarget(e);if(!s)return;const i=Y(e),o=this.targetFinder.findReply(t.body,i||void 0);if(!o)return;if(!d(s,"z-swap-before",{element:e,target:s,content:o,strategy:r}))return;const a=he(s,o,r),c=a.length>0?a:[s];if(a.length>0)for(const e of a)this.scriptProcessor.process(e),this.engine.activate(e),this.autoFocus(e);c.forEach(t=>{d(t,"z-swap-after",{element:e,target:t,content:o,strategy:r})})}getSwapStrategy(e){return y(e,"z-swap")||"inner"}autoFocus(e){const t=e.querySelector("[autofocus]");t instanceof HTMLElement&&setTimeout(()=>{t.focus()},0)}}function me(){let e=null;return{async afterDispatch(t){!t.expectJson&&t.response&&(e||(e=new pe(t.engine)),await e.swap(t.element,t.response))}}}function ge(){const e=new WeakMap,t=t=>{const n=(r=t.element,t.method,ne(r));var r;if(null===n)return void ve(e,t.element);const s=e.get(t.element);void 0!==s&&window.clearTimeout(s);const i=window.setTimeout(()=>{e.delete(t.element),document.contains(t.element)&&t.manager.executeRequest(t.element,t.url,t.options,t.event).catch(e=>{O(t.method)})},n);e.set(t.element,i)};return{success:t,error:t,finalize(t){var n;n=t.element,t.method,null===ne(n)&&ve(e,t.element)}}}function ve(e,t){const n=e.get(t);void 0!==n&&(window.clearTimeout(n),e.delete(t))}const ye=[re,ce,me,ge];function be(){return ye.map(e=>e())}class we{constructor(e,t={}){var n;this.engine=e,this.features=null!==(n=t.features)&&void 0!==n?n:be()}async executeRequest(e,t,n={},r){var s,i;const o=n.method||"GET",a=this.engine.getConfig(),c={...null!==(s=n.headers)&&void 0!==s?s:{}},l={...n,url:t,method:o,data:void 0,timeout:a.timeout,json:!1,headers:c};a.strictStatusCheck&&(l.strictStatusCheck=!0);const u=new XMLHttpRequest,h={element:e,url:t,method:o,options:n,requestOptions:l,data:n.data,event:r,xhr:u,expectJson:!1,manager:this,engine:this.engine,metadata:{}};for(const e of this.features)e.prepare&&await e.prepare(h);if(l.data=h.data,y(e,"aria-busy","true"),e.classList.add("z-active"),!d(e,"z-before",{element:e,url:t,method:o,data:h.data,xhr:u}))return y(e,"aria-busy",null),e.classList.remove("z-active"),null;try{const{promise:n}=w(l,u),r=await n;h.response=r;for(const e of this.features)e.success&&await e.success(h);d(e,"z-after",{element:e,url:t,method:o,status:r.status,response:null!==(i=r.json)&&void 0!==i?i:r.body,xhr:u});for(const e of this.features)e.afterDispatch&&await e.afterDispatch(h);return r}catch(n){h.error=n,d(e,"z-error",{element:e,url:t,method:o,error:n,xhr:u});for(const e of this.features)e.error&&await e.error(h);throw n}finally{y(e,"aria-busy",null),e.classList.remove("z-active"),d(e,"z-finally",{element:e});for(const e of this.features)e.finalize&&await e.finalize(h)}}}const Ee=new WeakMap;function xe(e){let t=Ee.get(e);return t||(t=new we(e),Ee.set(e,t)),t}class Se extends v{constructor(){super(...arguments),this.name="z-req",this.priority=100}activate(e,t){if(!this.shouldActivate(e,this.name))return;const n=this.getRequestUrl(e);if(!n)return;const r=this.getRequestMethod(e),s=xe(t),i=function(e){const t=y(e,"z-trigger");if(!t)return[{type:$(e)}];const n=t.split(",").map(e=>e.trim()).filter(e=>e.length>0).map(t=>function(e,t){const n=t.split(/\s+/).filter(Boolean);if(0===n.length)return null;let r=n.shift();("once"===r||"changed"===r||r.startsWith(q)||null!==_(r))&&(n.unshift(r),r=$(e));const s={type:r};return n.forEach(e=>{if("once"===e)return void(s.once=!0);if("changed"===e)return void(s.changed=!0);const t=_(e);if(null===t){if(e.startsWith(q)){const t=Number.parseInt(e.slice(6),10);!Number.isNaN(t)&&t>=0&&(s.delay=t)}}else s.every=t}),s}(e,t)).filter(e=>null!==e);return 0===n.length&&n.push({type:$(e)}),n}(e),o=async t=>{try{await s.executeRequest(e,n,{method:r},t)}catch(e){O(this.name)}};(function(e,t,n){t.forEach(t=>{var r;const s=function(e,t,n){let r=t.changed?V(e):void 0,s=null;return i=>{var o,a;if(t.changed){const t=V(null!==(o=i.target)&&void 0!==o?o:e);if(t===r)return;r=t}null===(a=n.before)||void 0===a||a.call(n,i);const c=()=>n.run(i);t.delay&&t.delay>0?(s&&clearTimeout(s),s=setTimeout(c,t.delay)):c()}}(e,t,n);null===(r=J[t.type])||void 0===r||r.call(J,e,t,()=>e.dispatchEvent(new Event(t.type))),p(e,t.type,s,t.once?{once:!0}:void 0)})})(e,i,{before:t=>{m(e,t.type)&&t.preventDefault()},run:e=>{o(e)}}),this.markActivated(e)}getRequestUrl(e){return y(e,this.name)||(e instanceof HTMLAnchorElement?e.href:e instanceof HTMLFormElement?e.action:null)}getRequestMethod(e){return te(e)||(e instanceof HTMLFormElement||e instanceof HTMLButtonElement?"POST":"GET")}}const Ae=["camel","kebab","snake","pascal"];function Ce(e,t=!1){const n=e.split(".");if(!t)return{name:n[0],modifiers:n.slice(1)};let r=-1;for(let e=0;e<n.length;e++)if(Ae.includes(n[e])){r=e;break}return r>0?{name:n.slice(0,r).join("."),modifiers:n.slice(r)}:{name:e,modifiers:[]}}function ke(e,t){switch(t){case"camel":return ie(e);case"pascal":return ae(e);case"snake":return oe(e);default:return e}}function Le(e,t,n){const r=function(e){return e.filter(e=>Ae.includes(e))}(t);return r.length>0?ke(e,r[r.length-1]):n?ke(e,n):e}class De extends v{constructor(){super(...arguments),this.name="z-signals",this.priority=80}activate(e,t){const n=Array.from(e.attributes);let r=!1;for(const e of n)if("z-signals"!==e.name){if(e.name.startsWith("z-signals-")){const t=Ce(e.name.slice(10),!0),n=Le(t.name,t.modifiers,"camel");this.processSignal(n,e.value),r=!0}}else this.processSignalsObject(e.value),r=!0;r&&this.markActivated(e)}processSignalsObject(e){try{const t=z(e);t&&"object"==typeof t&&!Array.isArray(t)?T.patch(t):void 0!==t&&T.set("z-signals",t)}catch(e){O(this.name)}}processSignal(e,t){try{if(""===t)T.set(e,"");else{const n=z(t);T.set(e,n)}}catch(e){O(this.name)}}}class Te{constructor(e,t=0){this.deps=new Set,this.cleanups=[],this.fn=e,this.priority=t,this.run()}addDependency(e){this.deps.add(e)}run(){for(const e of this.deps)e.unsubscribe(this);this.deps.clear();for(const e of this.cleanups)e();this.cleanups=[];const e=C(this);try{const e=this.fn();"function"==typeof e&&this.cleanups.push(e)}finally{C(e)}for(const e of this.deps)e.subscribe(this)}dispose(){for(const e of this.deps)e.unsubscribe(this);this.deps.clear();for(const e of this.cleanups)e();this.cleanups=[]}}function Me(e){return new Te(e)}function ze(){const e=new WeakMap,t=t=>{const n=e.get(t);n&&(function(e){for(const t of e)try{t.dispose()}catch(e){}}(n),e.delete(t))};return{run:(n,r)=>{t(n);const s=(i=r())?Array.isArray(i)?i:[i]:[];var i;return!!s.length&&(e.set(n,s),!0)},cleanup:t}}function Re(e,t){const n=Array.from(e.attributes),r=`${t}-`,s=[];let i=null;const o=[];for(const e of n)if(e.name!==t){if(e.name.startsWith(t+".")){const n=e.name.slice(t.length+1);if(!n.includes("-")){i=e.value,o.push(...n.split("."));continue}}if(e.name.startsWith(r)){const t=e.name.slice(r.length),n=t.indexOf(".");if(n>0){const r=t.slice(0,n),i=t.slice(n+1).split(".");s.push({name:r,value:e.value,modifiers:i})}else s.push({name:t,value:e.value,modifiers:[]})}}else i=e.value;return{baseValue:i,entries:s,modifiers:o}}function Oe(e,t,n){const r=Re(e,t),s=r.entries.map(e=>({name:n(e.name),value:e.value,modifiers:e.modifiers}));return{baseValue:r.baseValue,entries:s,modifiers:r.modifiers}}class Ne extends v{constructor(){super(...arguments),this.name="z-bind",this.priority=20,this.effects=ze()}activate(e,t){if(!(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement))return;const{baseValue:n,entries:r}=Oe(e,"z-bind",ie);let s=!1;n&&this.bindElement(e,n)&&(s=!0);for(const t of r)this.bindElement(e,t.name)&&(s=!0);s&&this.markActivated(e)}deactivate(e){this.effects.cleanup(e)}bindElement(e,t){return this.effects.run(e,()=>{let n=!1;const r=()=>{n||(e instanceof HTMLInputElement?"checkbox"===e.type?T.set(t,e.checked):"radio"===e.type?e.checked&&T.set(t,e.value):T.set(t,e.value):T.set(t,e.value))},s=Me(()=>{const r=T.get(t);n=!0;try{if(e instanceof HTMLInputElement)if("checkbox"===e.type)e.checked=!!r;else if("radio"===e.type)e.checked=e.value===String(r);else{const t=String(null!=r?r:"");e.value!==t&&(e.value=t)}else{const t=String(null!=r?r:"");e.value!==t&&(e.value=t)}}finally{n=!1}});return e.addEventListener("input",r),e.addEventListener("change",r),{dispose:()=>{s.dispose(),e.removeEventListener("input",r),e.removeEventListener("change",r)}}})}}class je extends v{constructor(){super(...arguments),this.effects=ze()}activate(e,t){const n=`${this.name}.lazy`,r=e.getAttribute(n)||e.getAttribute(this.name);if(!r)return;const s=e.hasAttribute(n);this.effects.run(e,()=>Me(()=>{try{const t=M.getLoopContext(e),n=z(r,t);if(s&&!this.hasExecuted(e))return void this.markExecuted(e);this.setContent(e,n)}catch(e){O(this.name)}}))&&(this.markActivated(e),s&&this.markExecuted(e))}deactivate(e){this.effects.cleanup(e);const t=e.__twinsparkDirectiveData||{};t[this.name]&&delete t[this.name].executed}hasExecuted(e){var t;return!!(null===(t=(e.__twinsparkDirectiveData||{})[this.name])||void 0===t?void 0:t.executed)}markExecuted(e){const t=e.__twinsparkDirectiveData||{};t[this.name]||(t[this.name]={}),t[this.name].executed=!0,e.__twinsparkDirectiveData=t}}class Fe extends je{constructor(){super(...arguments),this.name="z-text",this.priority=30}setContent(e,t){e.textContent=function(e,t={}){const{pretty:n=!1}=t;if(null==e)return"";if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return String(e);if("function"==typeof e)return e.name||"[Function]";if(e instanceof Date)return e.toISOString();if("object"==typeof e)try{return n?JSON.stringify(e,null,2):JSON.stringify(e)}catch(e){return"[Object]"}return String(e)}(t)}}class Pe extends v{constructor(){super(...arguments),this.name="z-computed",this.priority=15}activate(e,t){const{baseValue:n,entries:r}=Oe(e,"z-computed",ie);n&&this.processInlineAssignments(n);for(const e of r)this.processComputed(e.name,e.value);(n||r.length>0)&&this.markActivated(e)}processInlineAssignments(e){const t=this.parseAssignments(e);for(const{name:e,expr:n}of t)this.processComputed(e,n)}parseAssignments(e){const t=[],n=e.split(";").map(e=>e.trim()).filter(e=>e);for(const e of n){const n=e.match(/^\s*(\w+)\s*=\s*(.+)$/);if(n){const[,e,r]=n;t.push({name:e,expr:r})}}return t}processComputed(e,t){try{T.createComputed(e,()=>z(t))}catch(e){O(this.name)}}}class He extends v{constructor(){super(...arguments),this.name="z-show",this.priority=40,this.effects=ze()}activate(e,t){const n=e.getAttribute("z-show");n&&this.effects.run(e,()=>Me(()=>{try{const t=M.getLoopContext(e),r=z(n,t);e instanceof HTMLElement&&(e.style.display=r?"":"none")}catch(e){O(this.name)}}))&&this.markActivated(e)}deactivate(e){this.effects.cleanup(e)}}class Ie extends v{constructor(){super(...arguments),this.name="z-class",this.priority=50,this.effects=ze()}activate(e,t){const{baseValue:n,entries:r,modifiers:s}=Re(e,"z-class");if(!n&&0===r.length)return;const i=s.includes("lazy");this.effects.run(e,()=>{const t=[];if(n){const r=this.processClassObject(e,n,i);r&&t.push(r)}for(const n of r){const r=Le(n.name,n.modifiers),s=i||n.modifiers.includes("lazy"),o=this.processClassToggle(e,r,n.value,s);o&&t.push(o)}return t})&&this.markActivated(e)}deactivate(e){this.effects.cleanup(e)}processClassObject(e,t,n){const r=new Set;return Me(()=>{try{const s=z(t);if(n&&!this.hasExecuted(e))return void this.markExecuted(e);const i=new Set;if(s&&"object"==typeof s&&!Array.isArray(s))for(const[t,n]of Object.entries(s))i.add(t),e.classList.toggle(t,!!n);for(const t of r)i.has(t)||e.classList.remove(t);r.clear(),i.forEach(e=>r.add(e))}catch(e){O(this.name)}})}processClassToggle(e,t,n,r){return Me(()=>{try{const s=z(n);if(r&&!this.hasExecuted(e))return void this.markExecuted(e);e.classList.toggle(t,!!s)}catch(e){O(this.name)}})}hasExecuted(e){var t;return!!(null===(t=(e.__twinsparkDirectiveData||{})[this.name])||void 0===t?void 0:t.executed)}markExecuted(e){const t=e.__twinsparkDirectiveData||{};t[this.name]||(t[this.name]={}),t[this.name].executed=!0,e.__twinsparkDirectiveData=t}}function qe(e){if(!e)return"";const t=e.trim();return t?t.startsWith("--")?t:(t.includes("-")?t.toLowerCase():t).replace(/-([a-z0-9])/gi,(e,t)=>t.toUpperCase()):""}function We(e){return null!=e&&!1!==e&&("string"!=typeof e||""!==e)}class _e extends v{constructor(){super(...arguments),this.name="z-style",this.priority=55,this.effects=ze(),this.originalStyles=new WeakMap}activate(e,t){const{baseValue:n,entries:r,modifiers:s}=Re(e,"z-style");if(!n&&0===r.length)return;const i=s.includes("lazy");this.effects.run(e,()=>{const t=[];if(n){const r=this.processStyleObject(e,n,i);r&&t.push(r)}for(const n of r){const r=Le(n.name,n.modifiers),s=i||n.modifiers.includes("lazy"),o=this.processStyle(e,r,n.value,s);o&&t.push(o)}return t})&&this.markActivated(e)}deactivate(e){this.effects.cleanup(e);const t=this.originalStyles.get(e);if(t){for(const n of t.keys())this.restoreOriginalStyle(e,n);this.originalStyles.delete(e)}}processStyleObject(e,t,n){const r=new Set;return Me(()=>{try{const s=z(t);if(n&&!this.hasExecuted(e))return void this.markExecuted(e);const i=new Set;if(s&&"object"==typeof s&&!Array.isArray(s))for(const[t,n]of Object.entries(s)){const r=qe(t);i.add(r),this.setStyle(e,t,n)}for(const t of r)i.has(t)||this.restoreOriginalStyle(e,t);r.clear(),i.forEach(e=>r.add(e))}catch(e){O(this.name)}})}processStyle(e,t,n,r){return Me(()=>{try{const s=z(n);if(r&&!this.hasExecuted(e))return void this.markExecuted(e);this.setStyle(e,t,s)}catch(e){O(this.name)}})}setStyle(e,t,n){const r=qe(t),s=this.getCssPropertyName(t);if(this.captureOriginalStyle(e,r,s),!We(n))return void this.restoreOriginalStyle(e,r);const i=e,o="string"==typeof n?n:String(n);i.style.setProperty(s,o)}captureOriginalStyle(e,t,n){var r;let s=this.originalStyles.get(e);if(s||(s=new Map,this.originalStyles.set(e,s)),s.has(t))return;const i=e,o=null!==(r=i.getAttribute("style"))&&void 0!==r?r:"";new RegExp(`(^|;)\\s*${this.escapeForRegExp(n)}\\s*:`).test(o)?s.set(t,i.style.getPropertyValue(n)):s.set(t,null)}restoreOriginalStyle(e,t){const n=this.originalStyles.get(e),r=this.getCssPropertyName(t),s=e;if(!n||!n.has(t))return void s.style.removeProperty(r);const i=n.get(t);null!=i?s.style.setProperty(r,i):s.style.removeProperty(r)}getCssPropertyName(e){return e.startsWith("--")?e:e.includes("-")?e.toLowerCase():e.replace(/([A-Z])/g,"-$1").toLowerCase()}escapeForRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}hasExecuted(e){var t;return!!(null===(t=(e.__twinsparkDirectiveData||{})[this.name])||void 0===t?void 0:t.executed)}markExecuted(e){const t=e.__twinsparkDirectiveData||{};t[this.name]||(t[this.name]={}),t[this.name].executed=!0,e.__twinsparkDirectiveData=t}}class $e extends v{constructor(){super(...arguments),this.name="z-attr",this.priority=60,this.effects=ze()}activate(e,t){const{baseValue:n,entries:r,modifiers:s}=Re(e,"z-attr");if(!n&&0===r.length)return;const i=s.includes("lazy");this.effects.run(e,()=>{const t=[];if(n){const r=this.processAttrObject(e,n,i);r&&t.push(r)}for(const n of r){const r=Le(n.name,n.modifiers),s=i||n.modifiers.includes("lazy"),o=this.processAttr(e,r,n.value,s);o&&t.push(o)}return t})&&this.markActivated(e)}deactivate(e){this.effects.cleanup(e)}processAttrObject(e,t,n){const r=new Set;return Me(()=>{try{const s=z(t);if(n&&!this.hasExecuted(e))return void this.markExecuted(e);const i=new Set;if(s&&"object"==typeof s&&!Array.isArray(s))for(const[t,n]of Object.entries(s))i.add(t),this.setAttr(e,t,n);for(const t of r)i.has(t)||e.removeAttribute(t);r.clear(),i.forEach(e=>r.add(e))}catch(e){O(this.name)}})}processAttr(e,t,n,r){return Me(()=>{try{const s=z(n);if(r&&!this.hasExecuted(e))return void this.markExecuted(e);this.setAttr(e,t,s)}catch(e){O(this.name)}})}setAttr(e,t,n){const r=function(e){if(null==e||!1===e)return null;if(!0===e)return"";if("object"==typeof e)try{return JSON.stringify(e)}catch(e){return"[Object]"}return String(e)}(n);null===r?e.removeAttribute(t):e.setAttribute(t,r)}hasExecuted(e){var t;return!!(null===(t=(e.__twinsparkDirectiveData||{})[this.name])||void 0===t?void 0:t.executed)}markExecuted(e){const t=e.__twinsparkDirectiveData||{};t[this.name]||(t[this.name]={}),t[this.name].executed=!0,e.__twinsparkDirectiveData=t}}class Ve extends v{constructor(){super(...arguments),this.name="z-on",this.priority=70,this.listeners=new WeakMap,this.resizeObservers=new WeakMap}activate(e,t){var n,r;const s=this.resolveAttributes(e);if(0===s.length)return;const i=this.listeners.get(e);i&&this.removeListeners(e,i);const o=this.resizeObservers.get(e);o&&(o.disconnect(),this.resizeObservers.delete(e));const a=[];for(const{event:i,statement:o,modifiers:c}of s){if("resize"===i){this.setupResizeHandler(e,o,t,c);continue}const s=this.createHandler(o,e,t,c),l=this.getEventListenerOptions(c);if(null!==(n=null==c?void 0:c.includes("window"))&&void 0!==n&&n)window.addEventListener(i,s,l),a.push({event:i,handler:s,target:window});else{if(null!==(r=null==c?void 0:c.includes("outside"))&&void 0!==r&&r){const t=t=>{e.contains(t.target)||s(t)};document.addEventListener(i,t,l),a.push({event:i,handler:t,target:document});continue}e.addEventListener(i,s,l),a.push({event:i,handler:s,target:e})}}this.listeners.set(e,a),(a.length>0||this.resizeObservers.has(e))&&this.markActivated(e)}deactivate(e){const t=this.listeners.get(e);t&&(this.removeListeners(e,t),this.listeners.delete(e));const n=this.resizeObservers.get(e);n&&(n.disconnect(),this.resizeObservers.delete(e)),function(e){H.cleanup(e)}(e)}createHandler(e,t,n,r){return async n=>{var s;try{if(r&&r.length>0&&!this.applyModifiers(n,r,t))return;const i=null!==(s=null==r?void 0:r.some(e=>"viewtransition"===e))&&void 0!==s&&s;if(r&&r.length>0){const s=function(e){return P.parseDelayModifiers(e)}(r);if(s.delay||s.debounce||s.throttle){const r=await async function(e,t,n,r){return H.executeWithDelay({element:e,statement:t,execute:n},r)}(t,e,async()=>{await this.executeStatementWithViewTransition(e,n,t,i)},s);if(r.wait){if(!await r.wait)return}else r.executeNow&&await this.executeStatementWithViewTransition(e,n,t,i)}else await this.executeStatementWithViewTransition(e,n,t,i)}else await this.executeStatementWithViewTransition(e,n,t,i)}catch(e){O(this.name)}}}async executeStatementWithViewTransition(e,t,n,r){const s=()=>{const r=e.trim();if(/^[a-zA-Z_$][\w$]*$/.test(r)){const e=window[r];if("function"==typeof e){const n=window.$z;return e.call(null,n,t)}}const s=M.getLoopContext(n);R(e,{...s,event:t,$event:t,target:t.target,currentTarget:t.currentTarget})};r&&document.startViewTransition?document.startViewTransition(async()=>{await this.withEventSignals(t,s)}):await this.withEventSignals(t,s)}setupResizeHandler(e,t,n,r){const s=this.createHandler(t,e,n,r),i=new ResizeObserver(e=>{for(const t of e){const e=new Event("resize",{bubbles:!1});Object.defineProperty(e,"target",{value:t.target,enumerable:!0}),Object.defineProperty(e,"currentTarget",{value:t.target,enumerable:!0}),Object.defineProperty(e,"contentRect",{value:t.contentRect,enumerable:!0}),s(e)}});i.observe(e),this.resizeObservers.set(e,i)}async withEventSignals(e,t){var n,r;const s=[["event",e],["target",null!==(n=e.target)&&void 0!==n?n:null],["currentTarget",null!==(r=e.currentTarget)&&void 0!==r?r:null]],i=new Map;for(const[e,t]of s){const n=T.has(e),r=n?T.get(e):void 0;i.set(e,{existed:n,value:r}),T.set(e,t)}try{return await t()}finally{for(const[e,t]of i.entries())t.existed?T.set(e,t.value):T.delete(e)}}removeListeners(e,t){for(const{event:n,handler:r,target:s}of t)(s||e).removeEventListener(n,r)}resolveAttributes(e){const t=Array.from(e.attributes),n=[];for(const e of t){if(e.name.startsWith("z-on-")){const t=e.name.slice(5),{eventName:r,modifiers:s}=this.parseEventWithModifiers(t),i=this.resolveEventName(r);n.push({event:i,statement:e.value,modifiers:s});continue}Ve.SUPPORTED_ALIAS_ATTRIBUTES.includes(e.name)&&n.push({event:e.name,statement:e.value})}return n}parseEventWithModifiers(e){const t=Ce(e,!1);return{eventName:Le(t.name,t.modifiers),modifiers:t.modifiers.filter(e=>!Ae.includes(e))}}resolveEventName(e){if(e.toLowerCase().startsWith("z-"))return e.toLowerCase();const t=e.toLowerCase(),n=Ve.EVENT_ALIASES[t];return null!=n?n:e}getEventListenerOptions(e){if(!e||0===e.length)return!1;const t={};return e.includes("capture")&&(t.capture=!0),e.includes("once")&&(t.once=!0),e.includes("passive")&&(t.passive=!0),Object.keys(t).length>0&&t}applyModifiers(e,t,n){for(const r of t)switch(r){case"prevent":e.preventDefault();break;case"stop":e.stopPropagation();break;case"self":if(e.target!==n)return!1;break;case"ctrl":case"control":if(!e.ctrlKey)return!1;break;case"shift":if(!e.shiftKey)return!1;break;case"alt":if(!e.altKey)return!1;break;case"meta":if(!e.metaKey)return!1;break;case"enter":if("Enter"!==e.key)return!1;break;case"tab":if("Tab"!==e.key)return!1;break;case"delete":if("Delete"!==e.key&&"Backspace"!==e.key)return!1;break;case"esc":case"escape":if("Escape"!==e.key)return!1;break;case"space":if(" "!==e.key)return!1;break;case"up":if("ArrowUp"!==e.key)return!1;break;case"down":if("ArrowDown"!==e.key)return!1;break;case"left":if(e instanceof KeyboardEvent){if("ArrowLeft"!==e.key)return!1;break}if(e instanceof MouseEvent){if(0!==e.button)return!1;break}return!1;case"right":if(e instanceof KeyboardEvent){if("ArrowRight"!==e.key)return!1;break}if(e instanceof MouseEvent){if(2!==e.button)return!1;break}return!1;case"middle":if(!(e instanceof MouseEvent)||1!==e.button)return!1}return!0}}Ve.REQ_EVENT_ALIASES=["before","after","error","finally"],Ve.EVENT_ALIASES=(()=>{const e={};for(const t of Ve.REQ_EVENT_ALIASES)e[t]=`z-${t}`;return e})(),Ve.SUPPORTED_ALIAS_ATTRIBUTES=Ve.REQ_EVENT_ALIASES.map(e=>`z-${e}`);class Ue extends v{constructor(){super(...arguments),this.name="z-indicator",this.priority=15,this.listeners=new WeakMap}activate(e,t){const{baseValue:n,entries:r}=Oe(e,"z-indicator",ie),s=[];null!==n&&s.push(n||"loading");for(const e of r)s.push(e.name);if(s.length){for(const e of s)T.has(e)||T.set(e,!1);this.setupRequestListeners(e,s),this.markActivated(e)}}deactivate(e){const t=this.listeners.get(e);t&&(e.removeEventListener("z-before",t.before),e.removeEventListener("z-after",t.after),e.removeEventListener("z-error",t.error),this.listeners.delete(e))}setupRequestListeners(e,t){const n=()=>{t.forEach(e=>{T.set(e,!0)})},r=()=>{t.forEach(e=>{T.set(e,!1)})};this.listeners.set(e,{before:n,after:r,error:r}),e.addEventListener("z-before",n),e.addEventListener("z-after",r),e.addEventListener("z-error",r)}}class Be extends v{constructor(){super(...arguments),this.name="z-ignore",this.priority=1e3}activate(e,t){if(!e.hasAttribute("z-ignore"))return;const n=e.getAttribute("z-ignore")||"",r="self"===n||".self"===n||n.includes(".self");u(e).ignored=!0,r||this.markDescendantsIgnored(e),this.markActivated(e)}markDescendantsIgnored(e){e.querySelectorAll("*").forEach(e=>{u(e).ignored=!0})}static shouldIgnore(e){return!!u(e).ignored}}class Je extends v{constructor(){super(...arguments),this.name="z-effect",this.priority=20,this.effects=ze(),this.recursionDepth=new WeakMap,this.pendingResets=new WeakMap}activate(e,t){const n=e.getAttribute("z-effect"),r=null==n?void 0:n.trim();r&&this.effects.run(e,()=>{const t=this.createEffectWithGuard(e,r);return t?[t]:[]})&&this.markActivated(e)}deactivate(e){this.effects.cleanup(e),this.recursionDepth.delete(e),this.pendingResets.delete(e)}createEffectWithGuard(e,t){return Me(()=>{var n;const r=null!==(n=this.recursionDepth.get(e))&&void 0!==n?n:0;if(r>=Je.MAX_RECURSION)this.pendingResets.delete(e);else{this.recursionDepth.set(e,r+1);try{R(t)}catch(e){O(this.name)}finally{const t=Symbol("effect-reset");this.pendingResets.set(e,t),queueMicrotask(()=>{setTimeout(()=>{this.pendingResets.get(e)===t&&this.recursionDepth.has(e)&&(this.recursionDepth.set(e,0),this.pendingResets.delete(e))},0)})}}})}}Je.MAX_RECURSION=100;const Ke="undefined"!=typeof WeakRef;class Ge{constructor(){var e;this.refs=new Map,this.cleanupRegistry=(e=e=>{this.refs.delete(e),T.set(e,null)},"undefined"==typeof FinalizationRegistry?null:new FinalizationRegistry(t=>{e(t)}))}set(e,t){var n;if(this.resolveRef(e),Ke){const r=new WeakRef(t);this.refs.set(e,r),null===(n=this.cleanupRegistry)||void 0===n||n.register(t,e)}else this.refs.set(e,t);T.set(e,t)}get(e){return this.resolveRef(e)}delete(e){this.refs.delete(e),T.set(e,null)}has(e){return null!==this.resolveRef(e)}resolveRef(e){const t=this.refs.get(e);return t?Ke&&t instanceof WeakRef?t.deref()||(this.refs.delete(e),null):t:null}}const Ze=new Ge;function Xe(){return Ze}const Qe=/^[A-Za-z_$][\w$]*$/;class Ye extends v{constructor(){super(...arguments),this.name="z-ref",this.priority=100,this.refStore=Xe(),this.elementRefs=new WeakMap}activate(e,t){if(!function(e,t){const n=`${t}-`;return Array.from(e.attributes).some(e=>e.name===t||e.name.startsWith(n))}(e,"z-ref"))return;const{baseValue:n,entries:r}=Re(e,"z-ref"),s=new Set;if(n){const t=this.normalizeRefName(n);t&&(this.createRef(t,e),s.add(t))}for(const t of r){const n=t.value?t.value:t.name,r=this.normalizeRefName(n);r&&!s.has(r)&&(this.createRef(r,e),s.add(r))}s.size>0&&(this.elementRefs.set(e,s),this.markActivated(e))}deactivate(e){const t=this.elementRefs.get(e);if(t){for(const n of t)this.cleanupRef(n,e);this.elementRefs.delete(e)}}createRef(e,t){this.refStore.set(e,t)}cleanupRef(e,t){this.refStore.get(e)===t&&this.refStore.delete(e)}normalizeRefName(e){if(!e)return null;const t=e.trim();if(!t)return null;const n=t.includes("-")?ie(t):t;return Qe.test(n)?n:null}}class et extends v{constructor(){super(...arguments),this.name="z-load",this.priority=90,this.executed=new WeakSet,this.lastExpressions=new WeakMap}activate(e,t){const n=e.getAttribute("z-load"),r=null==n?void 0:n.trim();if(!r)return;this.executeOnce(e,r);const s=new MutationObserver(()=>{var t;const n=e.getAttribute("z-load"),r=null!==(t=null==n?void 0:n.trim())&&void 0!==t?t:"";if(!r)return this.executed.delete(e),void this.lastExpressions.delete(e);this.lastExpressions.get(e)!==r&&this.executeOnce(e,r)});s.observe(e,{attributes:!0,attributeFilter:["z-load"]});const i=u(e);i.onLoadObserver&&i.onLoadObserver.disconnect(),i.onLoadObserver=s,this.markActivated(e)}deactivate(e){const t=u(e);t.onLoadObserver&&(t.onLoadObserver.disconnect(),delete t.onLoadObserver),this.executed.delete(e),this.lastExpressions.delete(e)}executeOnce(e,t){const n=this.lastExpressions.get(e);if(!this.executed.has(e)||n!==t)try{R(t)}catch(e){O(this.name)}finally{this.executed.add(e),this.lastExpressions.set(e,t)}}}class tt extends je{constructor(){super(...arguments),this.name="z-html",this.priority=35}setContent(e,t){e.innerHTML=String(null!=t?t:"")}}const nt=Symbol.for("twinsparkLoopContext");class rt extends v{constructor(){super(...arguments),this.name="z-for",this.priority=5,this.effects=ze(),this.itemsMap=new WeakMap,this.templatesMap=new WeakMap}activate(e,t){const n=e.getAttribute("z-for");if(!n)return;const r=this.parseForExpression(n);if(!r)return void O(this.name,0,new Error(`Invalid z-for syntax: ${n}`));if("TEMPLATE"!==e.tagName)return void O(this.name,0,new Error("z-for must be used on <template> elements"));const s=e,i=s.parentElement;if(!i)return;const o=s.content.firstElementChild;if(!o)return void O(this.name,0,new Error("z-for template must contain at least one element"));this.templatesMap.set(e,o.cloneNode(!0));const a=document.createComment("z-for");i.insertBefore(a,s);const c=e.getAttribute("z-key");this.effects.run(e,()=>Me(()=>{try{const n=z(r.arrayExpression);this.renderList(e,a,n,r,c,t)}catch(e){O(this.name)}}))&&this.markActivated(e)}deactivate(e){this.effects.cleanup(e);const t=this.itemsMap.get(e);t&&(t.forEach(e=>{e.element.parentElement&&e.element.parentElement.removeChild(e.element)}),this.itemsMap.delete(e)),this.templatesMap.delete(e)}parseForExpression(e){const t=e.match(/^\s*(?:\(([^,)]+)(?:,\s*([^)]+))?\)|([^,\s]+)(?:,\s*([^\s]+))?)\s+in\s+(.+)\s*$/);if(!t)return null;const n=t[1]||t[3],r=t[2]||t[4],s=t[5];return n&&s?{itemName:n.trim(),indexName:null==r?void 0:r.trim(),arrayExpression:s.trim()}:null}renderList(e,t,n,r,s,i){Array.isArray(n)||(n=[]);const o=t.parentElement;if(!o)return;const a=this.itemsMap.get(e)||[],c=[],l=this.templatesMap.get(e);if(!l)return;const u=new Map;for(const e of a)u.set(e.key,e);n.forEach((e,n)=>{const a=s?this.evaluateKey(s,e,n,r):n;let h=u.get(a);if(h){u.delete(a);const e=c.length>0?c[c.length-1].element.nextSibling:t.nextSibling;h.element!==e&&o.insertBefore(h.element,e)}else{const s=l.cloneNode(!0);this.injectLoopContext(s,e,n,r);const u=c.length>0?c[c.length-1].element.nextSibling:t.nextSibling;o.insertBefore(s,u),i.activate(s),h={element:s,key:a}}c.push(h)}),u.forEach(e=>{e.element.parentElement&&("function"==typeof i.deactivate&&i.deactivate(e.element),e.element.parentElement.removeChild(e.element))}),this.itemsMap.set(e,c)}evaluateKey(e,t,n,r){try{const s={[r.itemName]:t};return r.indexName&&(s[r.indexName]=n),z(e,s)}catch(e){return n}}injectLoopContext(e,t,n,r){const s={...e[nt]||{}};s[r.itemName]=t,r.indexName&&(s[r.indexName]=n),e[nt]=s,this.setLoopContextRecursive(e,s)}setLoopContextRecursive(e,t){e[nt]=t,e.children&&Array.from(e.children).forEach(e=>{this.setLoopContextRecursive(e,t)})}}const st=[Be,rt,Se,De,Ye,et,Ue,Ne,Fe,tt,Pe,He,Ie,_e,$e,Ve,Je];function it(e,t=st){for(const n of t)e.register(new n)}function ot(e,t={}){var n;const r=new g(e);return it(r,null!==(n=t.directives)&&void 0!==n?n:st),r}const at="__twinSparkSignalsProxy";let ct=null,lt=null;const ut={init:e=>(lt||(lt=ot(e),lt.init()),(()=>{if("undefined"==typeof window)return;const e=window,t=e.$z;t&&t[at]?ct=t:(ct=new Proxy({[at]:!0},{get:(e,t)=>t===at||("$all"===t?()=>T.getAll():t===Symbol.toStringTag?"FastSignals":t===Symbol.iterator?function*(){const e=Object.entries(T.getAll());for(const t of e)yield t}:"string"==typeof t&&T.has(t)?T.get(t):void 0),set:(e,t,n)=>"string"==typeof t&&t!==at&&(T.set(t,n),!0),deleteProperty:(e,t)=>"string"==typeof t&&t!==at&&(T.has(t)&&T.delete(t),!0),has:(e,t)=>t===at||"$all"===t||"string"==typeof t&&T.has(t),ownKeys:()=>Object.keys(T.getAll()),getOwnPropertyDescriptor:(e,t)=>t===at?{configurable:!1,enumerable:!1,value:!0}:"$all"===t?{configurable:!0,enumerable:!1,value:()=>T.getAll(),writable:!1}:"string"==typeof t&&T.has(t)?{configurable:!0,enumerable:!0,value:T.get(t),writable:!0}:void 0}),Object.defineProperty(e,"$z",{value:ct,configurable:!0,enumerable:!1,writable:!1}))})(),lt),activate(e){if(!lt)throw new Error("Fast must be initialized before calling activate");lt.activate(e)},deactivate(e){if(!lt)throw new Error("Fast must be initialized before calling deactivate");lt.deactivate(e)},register(e){if(!lt)throw new Error("Fast must be initialized before registering directives");lt.register(e)},getEngine:()=>lt};"undefined"!=typeof window&&(window.Fast=ut,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{ut.init()}):ut.init()),e.ActionError=class extends i{constructor(e,t,n,r){super(`[Action: ${t}] ${e}`,r),this.name="ActionError",this.commandName=t,this.element=n}},e.AttrDirective=$e,e.BaseDirective=v,e.BindDirective=Ne,e.ClassDirective=Ie,e.CommandRegistry=s,e.ComputedDirective=Pe,e.ComputedSignal=k,e.ConfigManager=n,e.DataCollector=F,e.DirectiveError=class extends i{constructor(e,t,n,r){super(`[${t}] ${e}`,r),this.name="DirectiveError",this.directiveName=t,this.element=n}},e.DirectiveRegistry=r,e.Effect=Te,e.EffectDirective=Je,e.Engine=g,e.ErrorHandler=a,e.ExpressionEvaluator=M,e.Fast=ut,e.FastError=i,e.ForDirective=rt,e.GlobalRefStore=Ge,e.HtmlDirective=tt,e.IgnoreDirective=Be,e.IndicatorDirective=Ue,e.LOOP_CONTEXT_SYMBOL=nt,e.LoadDirective=et,e.OnDirective=Ve,e.RefDirective=Ye,e.ReqDirective=Se,e.RequestError=o,e.RequestManager=we,e.Scheduler=E,e.ScriptProcessor=de,e.ShowDirective=He,e.Signal=x,e.SignalsDirective=De,e.StyleDirective=_e,e.SwapManager=pe,e.TargetFinder=ue,e.TextDirective=Fe,e.attr=y,e.builtinDirectives=st,e.camelCase=function(e){return e.replace(/-([a-z])/g,(e,t)=>t.toUpperCase())},e.camelToKebab=function(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)},e.clearInternalData=h,e.computed=L,e.createEngine=ot,e.createJsonResponseFeature=ce,e.createPollingFeature=ge,e.createRefStore=Xe,e.createRequestDataFeature=re,e.createRequestManager=function(e,t=be()){return new we(e,{features:t})},e.createSwapFeature=me,e.default=ut,e.dispatchCustomEvent=d,e.effect=Me,e.elId=function(e){const t=u(e);return t._elId||(t._elId="el-"+ ++l),t._elId},e.escapeHtml=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},e.evaluateExpression=z,e.evaluateStatement=R,e.executeSwap=he,e.getAttrCrumbs=b,e.getFormatConfig=ee,e.getInternalData=u,e.getIntervalConfig=ne,e.getMethodConfig=te,e.getRequestManager=xe,e.getSelectorConfig=Y,e.globalRefStore=Ze,e.globalStore=T,e.hasAttr=function(e,t){return e.hasAttribute(t)},e.isValidStyleValue=We,e.kebabCase=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},e.kebabToCamel=ie,e.kebabToPascal=ae,e.kebabToSnake=oe,e.listen=p,e.mergeParams=j,e.normalizeStyleName=qe,e.parseData=N,e.parseElementConfig=Q,e.parseTime=function(e){const t=parseFloat(e);return e.endsWith("ms")?t:e.endsWith("s")?1e3*t:e.endsWith("m")?6e4*t:t},e.querySelector=f,e.querySelectorAll=function(e,t=document){return Array.from(t.querySelectorAll(e))},e.registerDefaultDirectives=it,e.serializeFormData=function(e){const t=new URLSearchParams;return e.forEach((e,n)=>{t.append(n,e.toString())}),t.toString()},e.setInternalData=function(e,t){c.set(e,t)},e.shouldPreventDefault=m,e.splitTrim=function(e,t){return e.split(t).map(e=>e.trim()).filter(e=>e.length>0)},e.trim=function(e){return e.trim()},e.unescapeHtml=function(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent||""},e.unlisten=function(e,t,n){const r=u(e);r.listeners&&(t&&n?(e.removeEventListener(t,n),r.listeners=r.listeners.filter(e=>e.event!==t||e.handler!==n)):t?(r.listeners.filter(e=>e.event===t).forEach(t=>e.removeEventListener(t.event,t.handler)),r.listeners=r.listeners.filter(e=>e.event!==t)):(r.listeners.forEach(t=>e.removeEventListener(t.event,t.handler)),r.listeners=[]))},e.xhr=w,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=fast.umd.min.js.map
